@app = angular.module('Burnup', [

  # Angular Deps.
  "templates"
  "angularMoment"
  "ui.bootstrap"
  "infinite-scroll"
  "selectize"
  "ngImgCrop"

  # Models
  "Burnup.models.Notification"
  "Burnup.models.User"
  "Burnup.models.Church"

  # Services
  "Burnup.services.Auth"
  "Burnup.services.SelectizeTemplator"

  # Directives
  "Burnup.directives.notifications"
  "Burnup.directives.buDecoPane"
  "Burnup.directives.buUsersNew"
  "Burnup.directives.buUsersFinalize"
  "Burnup.directives.buBootstrapFile"
  "Burnup.directives.buChurchesShow"

  # Controllers
  "Burnup.controllers.Main"
  "Burnup.controllers.UserTou"

])


@app.config(() ->
)

@app.run(($rootScope, amMoment) ->
  @App = {}
  App.cable = Cable.createConsumer "ws://<%=Rails.application.secrets.CABLE_HOST%>:<%=Rails.application.secrets.CABLE_PORT%>"
  amMoment.changeLocale('fr')
)


$(document).on 'page:load', ->
  $('[ng-app]').each ->
    module = $(this).attr('ng-app')
    angular.bootstrap(this, [module])
